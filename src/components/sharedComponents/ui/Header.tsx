import {
  Header as BaseHeader,
  ContainerPadding,
  InnerContainer,
  breakpointMediaQuery,
} from '@bootnodedev/db-ui-toolkit'
import { Link, useRouterState } from '@tanstack/react-router'
import type { ComponentPropsWithoutRef, FC } from 'react'
import styled, { css } from 'styled-components'
import { ConnectWalletButton } from '../ConnectButtonWrapper'

const NTTLaunchpadSVG = () => (
  <svg
    width="110"
    height="18"
    viewBox="0 0 110 18"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M9.41211 0.454102L3.14551 17.3555H0.104492L6.35352 0.454102H9.41211Z"
      fill="#A09FA1"
      fillOpacity="0.3"
    />
    <path
      d="M21.9062 0.605469H24.7891L26.3184 7.0918V0.605469H28.8496V14H26.2393L24.4814 7.0127V14H21.9062V0.605469ZM29.3506 0.605469H35.6523V3.38281H33.9824V14H31.0293V3.38281H29.3506V0.605469ZM36.0127 0.605469H42.3145V3.38281H40.6445V14H37.6914V3.38281H36.0127V0.605469ZM44.7754 0.605469H47.7461V11.1523H50.1719V14H44.7754V0.605469ZM54.8037 14L54.584 12.04H53.2129L53.0195 14H50.4443L52.1494 0.605469H55.8057L57.6777 14H54.8037ZM53.8984 5.3252L53.4854 9.39453H54.3115L53.8984 5.3252ZM57.8184 10.8184V0.605469H60.877V10.6689C60.877 11.126 61.0381 11.3545 61.3604 11.3545C61.6885 11.3545 61.8525 11.126 61.8525 10.6689V0.605469H64.9111V10.8184C64.9111 11.8555 64.624 12.6816 64.0498 13.2969C63.4756 13.9121 62.6699 14.2197 61.6328 14.2197H61.0615C59.9775 14.2197 59.166 13.9209 58.627 13.3232C58.0879 12.7256 57.8184 11.8906 57.8184 10.8184ZM65.5527 0.605469H68.4355L69.9648 7.0918V0.605469H72.4961V14H69.8857L68.1279 7.0127V14H65.5527V0.605469ZM77.1807 10.8359V8.14648H80.1074V10.9238C80.1074 11.3633 80.0518 11.7734 79.9404 12.1543C79.8291 12.5293 79.6533 12.875 79.4131 13.1914C79.1787 13.5078 78.8506 13.7598 78.4287 13.9473C78.0068 14.1289 77.5117 14.2197 76.9434 14.2197H76.4248C75.8154 14.2197 75.291 14.1348 74.8516 13.9648C74.418 13.7891 74.0781 13.54 73.832 13.2178C73.5859 12.8896 73.4072 12.5176 73.2959 12.1016C73.1846 11.6855 73.1289 11.208 73.1289 10.6689V3.86621C73.1289 3.36816 73.1875 2.91699 73.3047 2.5127C73.4219 2.1084 73.6064 1.74805 73.8584 1.43164C74.1104 1.11523 74.4502 0.869141 74.8779 0.693359C75.3115 0.517578 75.8213 0.429688 76.4072 0.429688H76.9434C77.5176 0.429688 78.0127 0.508789 78.4287 0.666992C78.8506 0.825195 79.1787 1.05078 79.4131 1.34375C79.6533 1.63086 79.8291 1.95605 79.9404 2.31934C80.0518 2.68262 80.1074 3.0957 80.1074 3.55859V5.75586H77.1807V3.68164C77.1807 3.45898 77.1426 3.29492 77.0664 3.18945C76.9961 3.07812 76.8701 3.02246 76.6885 3.02246C76.501 3.02246 76.3721 3.07227 76.3018 3.17188C76.2373 3.26563 76.2051 3.43555 76.2051 3.68164V10.8359C76.2051 11.0703 76.2432 11.2461 76.3193 11.3633C76.3955 11.4746 76.5244 11.5303 76.7061 11.5303C77.0225 11.5303 77.1807 11.2988 77.1807 10.8359ZM83.6582 8.60352V14H80.6875V0.605469H83.6582V5.46582H84.6865V0.605469H87.6484V14H84.6865V8.60352H83.6582ZM92.6934 8.83203H91.2695V14H88.3164V0.605469H92.5967C93.4756 0.605469 94.1143 0.828125 94.5127 1.27344C94.917 1.71289 95.1191 2.38965 95.1191 3.30371V6.08105C95.1191 6.9541 94.9053 7.63086 94.4775 8.11133C94.0557 8.5918 93.4609 8.83203 92.6934 8.83203ZM91.2695 2.95215V6.37109H91.6299C91.835 6.37109 91.9727 6.31836 92.043 6.21289C92.1133 6.10742 92.1484 5.94336 92.1484 5.7207V3.61133C92.1484 3.38281 92.1133 3.21582 92.043 3.11035C91.9785 3.00488 91.8408 2.95215 91.6299 2.95215H91.2695ZM99.0303 14L98.8105 12.04H97.4395L97.2461 14H94.6709L96.376 0.605469H100.032L101.904 14H99.0303ZM98.125 5.3252L97.7119 9.39453H98.5381L98.125 5.3252ZM102.186 14V0.605469H106.431C107.298 0.605469 107.96 0.839844 108.417 1.30859C108.88 1.77734 109.111 2.52734 109.111 3.55859V10.9238C109.111 12.9746 108.224 14 106.448 14H102.186ZM105.121 3.09277V11.4248H105.534C105.745 11.4248 105.889 11.3633 105.965 11.2402C106.047 11.1113 106.088 10.9033 106.088 10.6162V3.86621C106.088 3.5791 106.05 3.37988 105.974 3.26855C105.903 3.15137 105.769 3.09277 105.569 3.09277H105.121Z"
      fill="#C1BBF6"
    />
  </svg>
)

const Wrapper = styled(BaseHeader)`
  margin-bottom: calc(var(--base-gap-xl) * 2);
  padding-top: calc(var(--base-common-padding) * 3);
  position: relative;
  z-index: 10;
`

const NTTLaunchpadSVGWrapper = styled.span`
  display: none;

  ${breakpointMediaQuery(
    'tabletPortraitStart',
    css`
      display: flex;
    `,
  )}
`

const Inner = styled(InnerContainer)`
  align-items: center;
  height: 100%;
  justify-content: space-between;

  ${ContainerPadding}
`

const Start = styled.div`
  align-items: center;
  column-gap: var(--base-gap-xl);
  display: flex;
  flex: 1;
  justify-content: flex-start;
`

const LogoWrapper = styled.svg`
  display: block;
  fill: none;
  height: 12px;
  max-width: 100%;
  width: 126px;
`

const Logo: FC<ComponentPropsWithoutRef<'svg'>> = () => (
  <LogoWrapper
    viewBox="0 0 126 12"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M95.671 0H89.763C87.4929 0 85.654 1.87044 85.654 4.17972V7.82023C85.654 10.1296 87.4929 12 89.763 12H95.811V11.9938C98.0153 11.9185 99.7807 10.0815 99.7807 7.82025V4.17974C99.7807 1.87044 97.9418 0 95.671 0ZM95.034 10.0063H90.4V1.99374H95.034V10.0063ZM30.0458 0H24.1381C21.8675 0 20.0285 1.87044 20.0285 4.17972V7.82023C20.0285 10.1296 21.8675 12 24.1381 12H30.1855V11.9938C32.3904 11.9185 34.1554 10.0815 34.1554 7.82025V4.17974C34.1554 1.87044 32.3164 0 30.0458 0ZM29.4088 10.0063H24.7751V1.99374H29.4088V10.0063ZM63.1101 2.08986H63.1122L59.6806 8.13372V0H57.3032C55.8339 0 54.4777 0.796241 53.7441 2.08986L48.7715 10.8485L46.583 6.99478C48.155 6.97596 49.4249 5.67398 49.4249 4.07104V2.92581C49.4249 1.31034 48.1366 0 46.5481 0H35.298V12H40.0446V6.99686H41.1049L43.9447 12H50.3106L54.9339 3.8537V12H59.6806V11.9958L64.2834 3.88715V12H69.0301V0H66.6691C65.1999 0 63.8437 0.796241 63.1101 2.08986ZM44.6783 5.00312H40.0446V1.99374H44.6783V5.00312ZM79.7355 0H84.4822V12H79.7355V6.99686H75.1022V12H70.3554V0H75.1022V5.00314H79.7355V0ZM105.699 10.0063H111.826V12H105.062C102.791 12 100.952 10.1296 100.952 7.82023V0H105.699V10.0063ZM117.793 1.99372V5.00312H124.288V6.99686H117.793V10.0063H126V12H113.046V0H126V1.99374L117.793 1.99372ZM20.9141 0L15.2879 9.91015C14.5544 11.2037 13.1982 12 11.729 12H9.35156V3.86625L5.91997 9.91015C5.1864 11.2037 3.83021 12 2.361 12H0V0H4.74873V8.11285L9.35156 0.00417159V0H14.0982V8.1463L18.7216 0H20.9141Z"
      fill="#fff"
    />
  </LogoWrapper>
)

const HomeLink = styled(Link)`
  display: flex;

  &:active {
    opacity: 0.7;
  }
`

const End = styled.div`
  align-items: center;
  column-gap: calc(var(--base-gap));
  display: flex;
  flex: 1;
  height: 100%;
  justify-content: flex-end;
`

export const Header: FC<ComponentPropsWithoutRef<'header'>> = ({ ...restProps }) => {
  const { location } = useRouterState()
  const currentRoute = location.pathname

  return (
    <Wrapper {...restProps}>
      <Inner>
        <Start>
          <HomeLink to="/">
            <Logo />
          </HomeLink>
          {currentRoute === '/' ? null : (
            <NTTLaunchpadSVGWrapper>
              <NTTLaunchpadSVG />
            </NTTLaunchpadSVGWrapper>
          )}
        </Start>
        <End>
          <ConnectWalletButton label="Connect Wallet" />
        </End>
      </Inner>
    </Wrapper>
  )
}
